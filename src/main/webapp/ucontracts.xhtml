<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                 xmlns:p="http://primefaces.org/ui"
                 template="/template/templateu.xhtml">

    <ui:param name="page_name" value="Vue Contrats" />

    <ui:define name="menu">
   
    
    <head>

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <title>Gestion des contrats</title>
        <!-- STYLESHEET -->
        <!-- FONTS -->
        <!-- Muli -->
        <link href="https://fonts.googleapis.com/css?family=Signika:300,400,600,700" rel="stylesheet" />
        <!-- icon -->
        <!-- Font Awesome -->
        <link rel="stylesheet" href="fonts/icons/fontawesome/css/font-awesome.min.css" />
        <link rel="stylesheet" href="fonts/icons/sharehub/style.css" />
        <!-- Vendor -->
        <!-- Custom -->
        <link rel="stylesheet" href="vendor/magnificPopup/dist/magnific-popup.css" type="text/css" />
        <link href="css/style.css" rel="stylesheet" />

        <!-- JAVA SCRIPT -->
        <!-- require -->

        <script data-main="js/app" src="vendor/require/require.js"></script>
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>
    <h:body>
        <!-- HEADER -->
        <!-- MAIN -->
        <main>

            <div class="container">
                <!--sections-->

                <div class="row">

                    <h3 class="title-5 m-b-35">Gestion des contrats</h3>



                    <h:form>
                        <table class="table table-data2">
                            <h:button value="Retour" outcome="contracts.jsf" class="returnbuttons" />

                            <tr>
                                <td>
                                    <div class="imgbutton">
                                        <a href="contractvie.jsf">
                                            <img src="/images/life_insurance.jpg" alt="Snow" />
                                            <h:button value="Contrat Vie" class="btnimg" />
                                        </a>
                                    </div>
                                </td>
                                <td>
                                    <div class="imgbutton">
                                        <a href="contractrente.jsf">
                                            <img src="/images/annuityinsurance.jpg" alt="Snow" />
                                            <h:button value="Contrat Rente" class="btnimg" />
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="imgbutton">
                                        <a href="mixteinsurance.png">
                                            <img src="/images/mixteinsurance.png" alt="snow" />
                                            <h:button value="Contrat Mixte" class="btnimg" outcome="contractmixte.jsf" />
                                        </a>
                                    </div>
                                </td>
                            
                               
                            </tr>
                        </table>
                    </h:form>
                    

                    <h:panelGrid columns="2">
                        <h:form>
                            <h:dataTable value="#{ContractController.UContracts}" var="contract" border="1" styleClass="table table-data2">
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Approuvé" />
                                    </f:facet>
                                    <h:outputText value="#{contract.approved == true ? 'Oui' : 'Non'}" />
                                </h:column>

                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Type" />
                                    </f:facet>
                                    <h:outputText value="#{contract.type}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Date de Création" />
                                    </f:facet>
                                    <h:outputText value="#{contract.creation_date}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Date d'éxpiration" />
                                    </f:facet>
                                    <h:outputText value="#{contract.expiration_date}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Durée" />
                                    </f:facet>
                                    <h:outputText value="#{contract.duration}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Prime" />
                                    </f:facet>
                                    <h:outputText value="#{contract.price}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Capital/Rente" />
                                    </f:facet>
                                    <h:outputText value="#{contract.cost}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Taux %" />
                                    </f:facet>
                                    <h:outputText value="#{contract.rate *100} %" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Assuré" />
                                    </f:facet>
                                    <h:outputText value="#{contract.user.firstName} #{contract.user.lastName}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Gérer" />
                                    </f:facet>
                                    <h:commandButton action="#{ContractController.resignContract(contract.idcontract)}" value="Résilier" />
                                </h:column>
                            </h:dataTable>
                        </h:form>
                    </h:panelGrid>
                </div>
            </div>
        </main>
        <!-- FOOTER --><footer>

            
        </footer>
    </h:body>
        </ui:define>
</ui:composition>